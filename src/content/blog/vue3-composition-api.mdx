---
title: "Vue 3 Composition API 深度解析"
description: "深入理解 Vue 3 Composition API 的设计理念和最佳实践"
pubDate: "2023-03-15"
heroImage: "../../assets/blog-placeholder-1.jpg"
---

Vue 3 引入了全新的 Composition API，为组件逻辑复用提供了更好的方案。

## 什么是 Composition API？

Composition API 是 Vue 3 中最重要的特性之一，它提供了一种更灵活的方式来组织组件逻辑。

### setup 函数

```javascript
import { ref, computed, onMounted } from 'vue'

export default {
  setup() {
    const count = ref(0)
    const doubled = computed(() => count.value * 2)
    
    function increment() {
      count.value++
    }
    
    onMounted(() => {
      console.log('Component mounted!')
    })
    
    return {
      count,
      doubled,
      increment
    }
  }
}
```

## 响应式系统

Vue 3 使用 Proxy 重写了响应式系统，性能更好，功能更强大。

### ref 和 reactive

```javascript
import { ref, reactive } from 'vue'

// ref 用于基础类型
const count = ref(0)
console.log(count.value) // 0

// reactive 用于对象
const state = reactive({
  name: 'Vue',
  version: 3
})
console.log(state.name) // 'Vue'
```

## 生命周期钩子

```javascript
import {
  onBeforeMount,
  onMounted,
  onBeforeUpdate,
  onUpdated,
  onBeforeUnmount,
  onUnmounted
} from 'vue'

export default {
  setup() {
    onMounted(() => {
      console.log('Component mounted')
    })
    
    onUnmounted(() => {
      console.log('Component unmounted')
    })
  }
}
```

## 组合式函数

Composition API 的一大优势是可以提取和复用逻辑：

```javascript
// useCounter.js
import { ref, computed } from 'vue'

export function useCounter(initialValue = 0) {
  const count = ref(initialValue)
  const doubled = computed(() => count.value * 2)
  
  function increment() {
    count.value++
  }
  
  function decrement() {
    count.value--
  }
  
  return {
    count,
    doubled,
    increment,
    decrement
  }
}

// 在组件中使用
import { useCounter } from './useCounter'

export default {
  setup() {
    const { count, doubled, increment } = useCounter(10)
    
    return { count, doubled, increment }
  }
}
```

## 总结

Composition API 为 Vue 3 带来了更好的代码组织和逻辑复用能力，是现代 Vue 开发的核心特性。

