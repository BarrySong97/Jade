---
import CloudImage from "@/components/common/cloud-image-astro.astro";

interface Props {
  src?: string;
  alt?: string;
  title?: string;
  class?: string;
}

const { src, alt = "", title, class: className } = Astro.props;

// 判断是否为云图片（以 / 开头且不是完整 URL）
const isCloudImage = src && src.startsWith("/") && !src.startsWith("//");
---

{
  isCloudImage ? (
    <CloudImage src={src} alt={alt} class={`${className || ""}`} />
  ) : (
    <img
      src={src}
      alt={alt}
      title={title}
      class={`rounded-lg ${className || ""}`}
      loading="lazy"
    />
  )
}
